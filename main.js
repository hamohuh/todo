!function(c){var I={};function e(g){if(I[g])return I[g].exports;var t=I[g]={i:g,l:!1,exports:{}};return c[g].call(t.exports,t,t.exports,e),t.l=!0,t.exports}e.m=c,e.c=I,e.d=function(c,I,g){e.o(c,I)||Object.defineProperty(c,I,{enumerable:!0,get:g})},e.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},e.t=function(c,I){if(1&I&&(c=e(c)),8&I)return c;if(4&I&&"object"==typeof c&&c&&c.__esModule)return c;var g=Object.create(null);if(e.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:c}),2&I&&"string"!=typeof c)for(var t in c)e.d(g,t,function(I){return c[I]}.bind(null,t));return g},e.n=function(c){var I=c&&c.__esModule?function(){return c.default}:function(){return c};return e.d(I,"a",I),I},e.o=function(c,I){return Object.prototype.hasOwnProperty.call(c,I)},e.p="",e(e.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/todo.js\nconst Todo = (name, descrition, due, priority, isDone) => {\r\n    return { name, descrition, due, priority, isDone }\r\n}\r\n\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/project.js\n//let projects = [];\r\n\r\nconst Project = (name) => {\r\n    let todos = [];\r\n    return { name, todos }\r\n}\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/controller.js\n\r\n\r\n\r\n//get the projects from localStorage\r\nlet storedProjects = localStorage.getItem(\"projects\");\r\n\r\n//check if there is something in the localStorage, if not make it an empty array\r\nlet projectsArray = (storedProjects) ? JSON.parse(storedProjects) : [];\r\n\r\n/**\r\n * this is out main function which is responsible for rendering,\r\n * and controlling the whole project this its methods\r\n */\r\nconst RenderProject = () => {\r\n\r\n    /**\r\n     * this function adds object of Project\r\n     * @param name is the project name that we pass and we get it from the avlue input from the user\r\n     */\r\n    const addProject = (name) => {\r\n        let newProject = Project(name);\r\n        projectsArray.push(newProject);\r\n\r\n        localStorage.setItem('projects', JSON.stringify(projectsArray));\r\n    }\r\n\r\n    /**\r\n     * this dunction deletes an entire object at a specific index in the array\r\n     * @param {*} index we pass it through depends on the e.target index\r\n     */\r\n    const deleteProject = (index) => {\r\n        projectsArray.splice(index, 1);\r\n        localStorage.setItem('projects', JSON.stringify(projectsArray));\r\n        clearProjectsListUi();\r\n        clearTodosListUi();\r\n        renderProjects();\r\n\r\n        document.getElementById('selected-project-name').innerHTML = 'Select an Existing project';\r\n    }\r\n\r\n    /**\r\n     * this function renders the array of projects \r\n     */\r\n    const renderProjects = () => {\r\n        projectsArray.forEach(element => {\r\n            let index = projectsArray.indexOf(element);\r\n            const deleteProjIcon = document.createElement('i');\r\n            deleteProjIcon.classList.add('material-icons');\r\n            deleteProjIcon.innerHTML = \"delete\";\r\n            deleteProjIcon.setAttribute('data-delete-index', index);\r\n            const deleteTd = document.createElement('td');\r\n            deleteTd.classList.add('delete-button');\r\n            deleteTd.appendChild(deleteProjIcon);\r\n\r\n\r\n            const projNameTd = document.createElement('td');\r\n            projNameTd.classList.add('project-name');\r\n            projNameTd.innerHTML = projectsArray[index].name;\r\n            projNameTd.setAttribute('data-info-index', index);\r\n\r\n            const bulbProjIcon = document.createElement('i');\r\n            bulbProjIcon.classList.add('material-icons');\r\n            bulbProjIcon.innerHTML = \"lightbulb_outline\";\r\n            const bulbTd = document.createElement('td');\r\n            bulbTd.classList.add('project-icon');\r\n            bulbTd.appendChild(bulbProjIcon);\r\n\r\n            const projItemTr = document.createElement('tr');\r\n            projItemTr.classList.add('project-item');\r\n            projItemTr.appendChild(bulbTd);\r\n            projItemTr.appendChild(projNameTd);\r\n            projItemTr.appendChild(deleteTd);\r\n\r\n            const projectsBody = document.getElementById('projects-body');\r\n            projectsBody.appendChild(projItemTr);\r\n\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * this function adds a todo object inside a specific object's todos array\r\n     * @param {*} project the index of the project inside the projectsArray\r\n     * it's getting projectsArray[i]\r\n     */\r\n    const addTodo = (index) => {\r\n        let todoName = document.getElementById('todo-input-name').value;\r\n        let todoDescription = document.getElementById('todo-input-description').value;\r\n        let todoDue = document.getElementById('todo-date').value;\r\n        let e = document.getElementById('priority');\r\n        let priority = e.options[e.selectedIndex].text;\r\n        let isDone = false;\r\n\r\n        let newTodo = Todo(todoName, todoDescription, todoDue, priority, isDone);\r\n        projectsArray[index].todos.push(newTodo);\r\n\r\n        localStorage.setItem('projects', JSON.stringify(projectsArray));\r\n    }\r\n\r\n\r\n    /**\r\n     * this function render the todos on the proect object\r\n     * @param {*} index it gets the index of the object\r\n     * and gets into the array of objects todo and itterate over it\r\n     * it requires an array of todos to itterate on projectsArray[i].todos\r\n     */\r\n    const renderTodo = (index) => {\r\n        let collapse = 0;\r\n        let arrayLength = projectsArray[index].todos.length;\r\n        for (let i = 0; i < arrayLength; i++) {\r\n\r\n            //Done Icon and its div creation\r\n            let doneIcon = document.createElement('i');\r\n            doneIcon.classList.add('material-icons');\r\n            doneIcon.innerHTML = \"done_all\";\r\n            let doneIconDiv = document.createElement('div');\r\n            doneIconDiv.classList.add('.col-auto');\r\n            doneIconDiv.setAttribute('id', 'todo-done');\r\n            doneIconDiv.appendChild(doneIcon);\r\n\r\n            //Label icon and its div creation\r\n            let labelIcon = document.createElement('i');\r\n            labelIcon.classList.add('material-icons');\r\n            labelIcon.innerHTML = \"label_outline\";\r\n            labelIcon.setAttribute('id', 'labelIcon')\r\n            let labelIconDiv = document.createElement('div');\r\n            labelIconDiv.classList.add('.col-auto');\r\n            labelIconDiv.setAttribute('id', 'todo-label');\r\n            labelIconDiv.appendChild(labelIcon);\r\n\r\n            //the div container for done and label icons\r\n            let doneRow = document.createElement('div');\r\n            doneRow.classList.add('row');\r\n            doneRow.setAttribute('id', 'done-row');\r\n            doneRow.appendChild(doneIconDiv);\r\n            doneRow.appendChild(labelIconDiv);\r\n\r\n            //the Todo Name\r\n            let todoName = document.createElement('p');\r\n            todoName.innerHTML = projectsArray[index].todos[i].name\r\n            let todoNameLink = document.createElement('a');\r\n            todoNameLink.classList.add('collapsed');\r\n            todoNameLink.classList.add('card-link');\r\n            todoNameLink.setAttribute('data-toggle', 'collapse');\r\n            todoNameLink.setAttribute('href', `collapse${collapse}`);\r\n            todoNameLink.appendChild(todoName);\r\n\r\n            //todo date\r\n            let todoDate = document.createElement('p');\r\n            todoDate.setAttribute('id', 'todo-item-date');\r\n            todoDate.innerHTML = projectsArray[index].todos[i].due;\r\n\r\n            //Edit Icon and its div creation\r\n            let editIcon = document.createElement('i');\r\n            editIcon.classList.add('material-icons');\r\n            editIcon.innerHTML = \"edit\";\r\n            let editIconDiv = document.createElement('div');\r\n            editIconDiv.classList.add('.col-auto');\r\n            editIconDiv.setAttribute('id', 'todo-edit');\r\n            editIconDiv.appendChild(editIcon);\r\n\r\n            //Delete icon and its div creation\r\n            let deleteIcon = document.createElement('i');\r\n            deleteIcon.classList.add('material-icons');\r\n            deleteIcon.innerHTML = \"delete\";\r\n            let deleteIconDiv = document.createElement('div');\r\n            deleteIconDiv.classList.add('.col-auto');\r\n            deleteIconDiv.setAttribute('id', 'todo-delete');\r\n            deleteIconDiv.appendChild(deleteIcon);\r\n\r\n            //the div container for edit and delete icons\r\n            let editRow = document.createElement('div');\r\n            editRow.classList.add('row');\r\n            editRow.setAttribute('id', 'edit-row');\r\n            editRow.appendChild(editIconDiv);\r\n            editRow.appendChild(deleteIconDiv);\r\n\r\n            //card header div to contain all above\r\n            let cardHeader = document.createElement('div');\r\n            cardHeader.classList.add('card-header');\r\n            cardHeader.appendChild(doneRow);\r\n            cardHeader.appendChild(todoNameLink);\r\n            cardHeader.appendChild(todoDate);\r\n            cardHeader.appendChild(editRow);\r\n\r\n            //the card body contains the descretion\r\n            let cardBodyText = document.createElement('div');\r\n            cardBodyText.classList.add('card-body');\r\n            cardBodyText.innerHTML = projectsArray[index].todos[i].descrition;\r\n\r\n            //div that contains the card body\r\n            let cardBody = document.createElement('div');\r\n            cardBody.classList.add('collapse');\r\n            cardBody.setAttribute('id', `collapse${collapse}`);\r\n            collapse++;\r\n            cardBody.setAttribute('data-parent', '#accordion');\r\n            cardBody.appendChild(cardBodyText);\r\n\r\n            //the card div that contains the card header and card body\r\n            let card = document.createElement('div');\r\n            card.classList.add('card');\r\n            card.appendChild(cardHeader);\r\n            card.appendChild(cardBody);\r\n\r\n            //div contains all the cards\r\n            let cardsContainer = document.getElementById('accordion');\r\n            cardsContainer.appendChild(card);\r\n\r\n            toggleTodo()\r\n\r\n            /**\r\n             *check the periority value and set the label color depends on the value\r\n             */\r\n            const checkPriority = () => {\r\n                if (projectsArray[index].todos[i].priority == \"Normal\") {\r\n                    labelIcon.style.color = \"#00c41f\";\r\n                } else if (projectsArray[index].todos[i].priority == \"Medium\") {\r\n                    labelIcon.style.color = \"#fffb00\";\r\n                } else if (projectsArray[index].todos[i].priority == \"Importnat\") {\r\n                    labelIcon.style.color = \"red\";\r\n                }\r\n                localStorage.setItem('projects', JSON.stringify(projectsArray));\r\n            }\r\n\r\n            /**\r\n             * change the Todo state from undone to done\r\n             */\r\n            function changeTodoState() {\r\n                doneIcon.addEventListener('click', () => {\r\n                    projectsArray[index].todos[i].isDone = true;\r\n                    localStorage.setItem('projects', JSON.stringify(projectsArray));\r\n                    changeStateColor();\r\n                })\r\n            }\r\n\r\n            /**\r\n             * change the color of the done icon when the todo is done\r\n             */\r\n            const changeStateColor = () => {\r\n                if (projectsArray[index].todos[i].isDone == true) {\r\n                    doneIcon.style.color = \"#1fb462\";\r\n                    localStorage.setItem('projects', JSON.stringify(projectsArray));\r\n                }\r\n            }\r\n\r\n            /**\r\n             * delete Todo item\r\n             */\r\n            const deleteTodo = () => {\r\n                deleteIcon.addEventListener('click', () => {\r\n                    projectsArray[index].todos.splice(i, 1);\r\n                    localStorage.setItem('projects', JSON.stringify(projectsArray));\r\n                    clearTodosListUi();\r\n                    renderTodo(index);\r\n                })\r\n            }\r\n\r\n            //function calls\r\n            checkPriority();\r\n            changeStateColor();\r\n            changeTodoState();\r\n            deleteTodo()\r\n        };\r\n    }\r\n\r\n    /**\r\n     * this function to render the selected project name\r\n     * @param {*} index the index of the selected project\r\n     */\r\n    const renderSelectedProjectName = (index) => {\r\n        let selectedProjName = document.getElementById('selected-project-name');\r\n        selectedProjName.innerHTML = projectsArray[index].name;\r\n        selectedProjName.setAttribute('selected-name-index', index);\r\n    }\r\n\r\n    /**\r\n     * this function to clear the projects list UI\r\n     */\r\n    const clearProjectsListUi = () => {\r\n        document.getElementById('projects-body').innerHTML = \"\";\r\n    }\r\n\r\n    /**\r\n     * this function to clear the todos list UI\r\n     */\r\n    const clearTodosListUi = () => {\r\n        document.getElementById('accordion').innerHTML = \"\";\r\n    }\r\n\r\n    /**\r\n     * this function is responsible for toggling the todo items card\r\n     */\r\n    const toggleTodo = () => {\r\n        $(\".card\").on(\"click\", function (e) {\r\n            var $_target = $(e.currentTarget);\r\n            var $_cardBody = $_target.find(\".collapse\");\r\n            if ($_cardBody) {\r\n                $_cardBody.collapse('toggle')\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    return {\r\n        addProject,\r\n        deleteProject,\r\n        renderProjects,\r\n        clearProjectsListUi,\r\n        clearTodosListUi,\r\n        addTodo,\r\n        renderTodo,\r\n        renderSelectedProjectName,\r\n        toggleTodo\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * for my demo Tutorial i made a manual proect and some Todos\r\n */\r\nconst render = RenderProject();\r\n\r\n//adding the first element manually\r\nprojectsArray[0] = { name: 'Tutorial', todos: [] };\r\n\r\n//todos objects for my tutorial demo to push manually \r\nlet tutotialTodo1 = Todo(\"Add project\", \"You can add a new project by clicking '+' next to My projects on the left top and type the project name then press 'Add' \", \"2020-01-30\", \"Normal\", true);\r\nlet tutotialTodo2 = Todo(\"Select a specific project\", \"Then you can select a specefic project you wanna add todos to it\", \"2020-01-31\", \"Medium\", false);\r\nlet tutotialTodo3 = Todo(\"Adding a new Todo\", \"To add a new todo, select the targeted project then press '+' on the top righ\", \"2020-05-12\", \"Important\", true);\r\nlet tutotialTodo4 = Todo(\"Adding a new Todo info\", \"In the pop up form just fill the information about your todo and Ta Da it's added to your selected project\", \"2020-08-20\", \"Important\", false);\r\nlet tutotialTodo5 = Todo(\"See added or existing todo info\", \"Just click the Todo name and it will toggle a menue with the details you added earlier\", \"2021-08-20\", \"Normal\", false);\r\nlet tutotialTodo6 = Todo(\"Mark todo done after finishing\", \"Just click Alright mark next to the todo name and once you click it it will mark green means it's done\", \"2050-08-20\", \"Important\", false);\r\n\r\n//i pushed them manually cause the addTodo function gets the values from the form inputs\r\nprojectsArray[0].todos.push(tutotialTodo1);\r\nprojectsArray[0].todos.push(tutotialTodo2);\r\nprojectsArray[0].todos.push(tutotialTodo3);\r\nprojectsArray[0].todos.push(tutotialTodo4);\r\nprojectsArray[0].todos.push(tutotialTodo5);\r\nprojectsArray[0].todos.push(tutotialTodo6);\r\n\r\nrender.renderProjects();\r\nrender.renderTodo(0);\r\nrender.renderSelectedProjectName(0);\r\n\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/index.js\n\r\n\r\n\r\nconst src_render = RenderProject();\r\n\r\n/**\r\n * listen to the event when click on the delte icon on the project\r\n */\r\ndocument.getElementById('projects-body').addEventListener('click', function (e) {\r\n\r\n    if (e.target && e.target.dataset.deleteIndex != undefined) {\r\n        let index = e.target.dataset.deleteIndex;\r\n        src_render.deleteProject(index);\r\n    }\r\n})\r\n\r\n/**\r\n * this function renders the todos inside any project depends on the click target\r\n */\r\ndocument.getElementById('projects-body').addEventListener('click', function (e) {\r\n    if (e.target && e.target.dataset.infoIndex != undefined) {\r\n        let index = e.target.dataset.infoIndex;\r\n        src_render.renderSelectedProjectName(index);\r\n        src_render.clearTodosListUi();\r\n        src_render.renderTodo(index);\r\n    }\r\n})\r\n\r\n/**\r\n * this function render the projects from the objects array\r\n * once the user add new project and click add button\r\n */\r\nconst renderCurrentProjects = function () {\r\n\r\n    src_render.clearProjectsListUi();\r\n\r\n    let projName = document.getElementById('project-input-name').value;\r\n\r\n    src_render.addProject(projName);\r\n\r\n    src_render.renderProjects();\r\n\r\n    document.getElementById('project-input-name').value = \"\";\r\n\r\n    //hide the form after clicking the button\r\n    $('.modal').modal('hide')\r\n\r\n    //this function call to control todo items toggling\r\n    src_render.toggleTodo();\r\n}\r\n\r\n\r\n\r\n/**\r\n * this function adds a new Todo to a specific proect's todos array\r\n * at a specific index\r\n */\r\nconst addNewTodo = function () {\r\n    let selectedProjName = document.getElementById('selected-project-name');\r\n    let index = selectedProjName.getAttribute('selected-name-index');\r\n    src_render.addTodo(index);\r\n    src_render.clearTodosListUi();\r\n    src_render.renderTodo(index);\r\n    document.getElementById('todo-input-name').value = \"\";\r\n    document.getElementById('todo-input-description').value = \"\";\r\n    document.getElementById('todo-date').value = \"\";\r\n    document.getElementById('priority').value = \"\";\r\n    //hide the form after clicking the button\r\n    $('.modal').modal('hide')\r\n    //this function call to control todo items toggling\r\n    src_render.toggleTodo();\r\n}\r\n\r\n\r\n// Add project button event when it's clicked\r\ndocument.getElementById('add-project-button').addEventListener('click', renderCurrentProjects);\r\n\r\n// Add todo button event when it's clicked\r\ndocument.getElementById('add-todo-button').addEventListener('click', addNewTodo);\r\n\r\n//this function call to control todo items toggling\r\nsrc_render.toggleTodo();\r\n\r\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdG9kby5qcz8yNGQ5Iiwid2VicGFjazovLy8uL3NyYy9wcm9qZWN0LmpzP2Y1OWIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIuanM/NjI4MyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBLFlBQVk7QUFDWjs7QUFFZTs7Ozs7QUNKZjs7QUFFQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOztBQUVrQjs7O0FDUFk7QUFDTTs7QUFFcEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixPQUFPO0FBQ2hDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsRUFBRTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLFNBQVM7QUFDVDs7O0FBR0E7QUFDQTtBQUNBLGVBQWUsRUFBRTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCLElBQUk7QUFDMUI7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLGVBQWUsRUFBRTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsaUJBQWlCOztBQUV4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsU0FBUztBQUNsRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxTQUFTO0FBQzVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLEVBQUU7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9COztBQUVwQjtBQUNBLG9CQUFvQixJQUFJO0FBQ3hCLG9CQUFvQixJQUFJO0FBQ3hCLG9CQUFvQixJQUFJO0FBQ3hCLG9CQUFvQixJQUFJO0FBQ3hCLG9CQUFvQixJQUFJO0FBQ3hCLG9CQUFvQixJQUFJOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7QUN4VjRDOzs7QUFHNUMsTUFBTSxVQUFNLEdBQUcsYUFBYTs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVEsVUFBTTtBQUNkO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLFVBQU07QUFDZCxRQUFRLFVBQU07QUFDZCxRQUFRLFVBQU07QUFDZDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJLFVBQU07O0FBRVY7O0FBRUEsSUFBSSxVQUFNOztBQUVWLElBQUksVUFBTTs7QUFFVjs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxVQUFNO0FBQ1Y7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksVUFBTTtBQUNWLElBQUksVUFBTTtBQUNWLElBQUksVUFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxVQUFNO0FBQ1Y7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFVBQU0iLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFRvZG8gPSAobmFtZSwgZGVzY3JpdGlvbiwgZHVlLCBwcmlvcml0eSwgaXNEb25lKSA9PiB7XHJcbiAgICByZXR1cm4geyBuYW1lLCBkZXNjcml0aW9uLCBkdWUsIHByaW9yaXR5LCBpc0RvbmUgfVxyXG59XHJcblxyXG5leHBvcnQgeyBUb2RvIH1cclxuXHJcblxyXG4iLCIvL2xldCBwcm9qZWN0cyA9IFtdO1xyXG5cclxuY29uc3QgUHJvamVjdCA9IChuYW1lKSA9PiB7XHJcbiAgICBsZXQgdG9kb3MgPSBbXTtcclxuICAgIHJldHVybiB7IG5hbWUsIHRvZG9zIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUHJvamVjdCB9XHJcbiIsImltcG9ydCB7IFRvZG8gfSBmcm9tIFwiLi90b2RvXCI7XHJcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0XCI7XHJcblxyXG4vL2dldCB0aGUgcHJvamVjdHMgZnJvbSBsb2NhbFN0b3JhZ2VcclxubGV0IHN0b3JlZFByb2plY3RzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcm9qZWN0c1wiKTtcclxuXHJcbi8vY2hlY2sgaWYgdGhlcmUgaXMgc29tZXRoaW5nIGluIHRoZSBsb2NhbFN0b3JhZ2UsIGlmIG5vdCBtYWtlIGl0IGFuIGVtcHR5IGFycmF5XHJcbmxldCBwcm9qZWN0c0FycmF5ID0gKHN0b3JlZFByb2plY3RzKSA/IEpTT04ucGFyc2Uoc3RvcmVkUHJvamVjdHMpIDogW107XHJcblxyXG4vKipcclxuICogdGhpcyBpcyBvdXQgbWFpbiBmdW5jdGlvbiB3aGljaCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nLFxyXG4gKiBhbmQgY29udHJvbGxpbmcgdGhlIHdob2xlIHByb2plY3QgdGhpcyBpdHMgbWV0aG9kc1xyXG4gKi9cclxuY29uc3QgUmVuZGVyUHJvamVjdCA9ICgpID0+IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHRoaXMgZnVuY3Rpb24gYWRkcyBvYmplY3Qgb2YgUHJvamVjdFxyXG4gICAgICogQHBhcmFtIG5hbWUgaXMgdGhlIHByb2plY3QgbmFtZSB0aGF0IHdlIHBhc3MgYW5kIHdlIGdldCBpdCBmcm9tIHRoZSBhdmx1ZSBpbnB1dCBmcm9tIHRoZSB1c2VyXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IGFkZFByb2plY3QgPSAobmFtZSkgPT4ge1xyXG4gICAgICAgIGxldCBuZXdQcm9qZWN0ID0gUHJvamVjdChuYW1lKTtcclxuICAgICAgICBwcm9qZWN0c0FycmF5LnB1c2gobmV3UHJvamVjdCk7XHJcblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzQXJyYXkpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRoaXMgZHVuY3Rpb24gZGVsZXRlcyBhbiBlbnRpcmUgb2JqZWN0IGF0IGEgc3BlY2lmaWMgaW5kZXggaW4gdGhlIGFycmF5XHJcbiAgICAgKiBAcGFyYW0geyp9IGluZGV4IHdlIHBhc3MgaXQgdGhyb3VnaCBkZXBlbmRzIG9uIHRoZSBlLnRhcmdldCBpbmRleFxyXG4gICAgICovXHJcbiAgICBjb25zdCBkZWxldGVQcm9qZWN0ID0gKGluZGV4KSA9PiB7XHJcbiAgICAgICAgcHJvamVjdHNBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzQXJyYXkpKTtcclxuICAgICAgICBjbGVhclByb2plY3RzTGlzdFVpKCk7XHJcbiAgICAgICAgY2xlYXJUb2Rvc0xpc3RVaSgpO1xyXG4gICAgICAgIHJlbmRlclByb2plY3RzKCk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RlZC1wcm9qZWN0LW5hbWUnKS5pbm5lckhUTUwgPSAnU2VsZWN0IGFuIEV4aXN0aW5nIHByb2plY3QnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogdGhpcyBmdW5jdGlvbiByZW5kZXJzIHRoZSBhcnJheSBvZiBwcm9qZWN0cyBcclxuICAgICAqL1xyXG4gICAgY29uc3QgcmVuZGVyUHJvamVjdHMgPSAoKSA9PiB7XHJcbiAgICAgICAgcHJvamVjdHNBcnJheS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSBwcm9qZWN0c0FycmF5LmluZGV4T2YoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZVByb2pJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgICAgICBkZWxldGVQcm9qSWNvbi5jbGFzc0xpc3QuYWRkKCdtYXRlcmlhbC1pY29ucycpO1xyXG4gICAgICAgICAgICBkZWxldGVQcm9qSWNvbi5pbm5lckhUTUwgPSBcImRlbGV0ZVwiO1xyXG4gICAgICAgICAgICBkZWxldGVQcm9qSWNvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtZGVsZXRlLWluZGV4JywgaW5kZXgpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWxldGVUZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgIGRlbGV0ZVRkLmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZS1idXR0b24nKTtcclxuICAgICAgICAgICAgZGVsZXRlVGQuYXBwZW5kQ2hpbGQoZGVsZXRlUHJvakljb24pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2pOYW1lVGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICBwcm9qTmFtZVRkLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtbmFtZScpO1xyXG4gICAgICAgICAgICBwcm9qTmFtZVRkLmlubmVySFRNTCA9IHByb2plY3RzQXJyYXlbaW5kZXhdLm5hbWU7XHJcbiAgICAgICAgICAgIHByb2pOYW1lVGQuc2V0QXR0cmlidXRlKCdkYXRhLWluZm8taW5kZXgnLCBpbmRleCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBidWxiUHJvakljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgICAgIGJ1bGJQcm9qSWNvbi5jbGFzc0xpc3QuYWRkKCdtYXRlcmlhbC1pY29ucycpO1xyXG4gICAgICAgICAgICBidWxiUHJvakljb24uaW5uZXJIVE1MID0gXCJsaWdodGJ1bGJfb3V0bGluZVwiO1xyXG4gICAgICAgICAgICBjb25zdCBidWxiVGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICBidWxiVGQuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1pY29uJyk7XHJcbiAgICAgICAgICAgIGJ1bGJUZC5hcHBlbmRDaGlsZChidWxiUHJvakljb24pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvakl0ZW1UciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgICAgIHByb2pJdGVtVHIuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1pdGVtJyk7XHJcbiAgICAgICAgICAgIHByb2pJdGVtVHIuYXBwZW5kQ2hpbGQoYnVsYlRkKTtcclxuICAgICAgICAgICAgcHJvakl0ZW1Uci5hcHBlbmRDaGlsZChwcm9qTmFtZVRkKTtcclxuICAgICAgICAgICAgcHJvakl0ZW1Uci5hcHBlbmRDaGlsZChkZWxldGVUZCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0c0JvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdHMtYm9keScpO1xyXG4gICAgICAgICAgICBwcm9qZWN0c0JvZHkuYXBwZW5kQ2hpbGQocHJvakl0ZW1Ucik7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRoaXMgZnVuY3Rpb24gYWRkcyBhIHRvZG8gb2JqZWN0IGluc2lkZSBhIHNwZWNpZmljIG9iamVjdCdzIHRvZG9zIGFycmF5XHJcbiAgICAgKiBAcGFyYW0geyp9IHByb2plY3QgdGhlIGluZGV4IG9mIHRoZSBwcm9qZWN0IGluc2lkZSB0aGUgcHJvamVjdHNBcnJheVxyXG4gICAgICogaXQncyBnZXR0aW5nIHByb2plY3RzQXJyYXlbaV1cclxuICAgICAqL1xyXG4gICAgY29uc3QgYWRkVG9kbyA9IChpbmRleCkgPT4ge1xyXG4gICAgICAgIGxldCB0b2RvTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWlucHV0LW5hbWUnKS52YWx1ZTtcclxuICAgICAgICBsZXQgdG9kb0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8taW5wdXQtZGVzY3JpcHRpb24nKS52YWx1ZTtcclxuICAgICAgICBsZXQgdG9kb0R1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWRhdGUnKS52YWx1ZTtcclxuICAgICAgICBsZXQgZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpO1xyXG4gICAgICAgIGxldCBwcmlvcml0eSA9IGUub3B0aW9uc1tlLnNlbGVjdGVkSW5kZXhdLnRleHQ7XHJcbiAgICAgICAgbGV0IGlzRG9uZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgbmV3VG9kbyA9IFRvZG8odG9kb05hbWUsIHRvZG9EZXNjcmlwdGlvbiwgdG9kb0R1ZSwgcHJpb3JpdHksIGlzRG9uZSk7XHJcbiAgICAgICAgcHJvamVjdHNBcnJheVtpbmRleF0udG9kb3MucHVzaChuZXdUb2RvKTtcclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkocHJvamVjdHNBcnJheSkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRoaXMgZnVuY3Rpb24gcmVuZGVyIHRoZSB0b2RvcyBvbiB0aGUgcHJvZWN0IG9iamVjdFxyXG4gICAgICogQHBhcmFtIHsqfSBpbmRleCBpdCBnZXRzIHRoZSBpbmRleCBvZiB0aGUgb2JqZWN0XHJcbiAgICAgKiBhbmQgZ2V0cyBpbnRvIHRoZSBhcnJheSBvZiBvYmplY3RzIHRvZG8gYW5kIGl0dGVyYXRlIG92ZXIgaXRcclxuICAgICAqIGl0IHJlcXVpcmVzIGFuIGFycmF5IG9mIHRvZG9zIHRvIGl0dGVyYXRlIG9uIHByb2plY3RzQXJyYXlbaV0udG9kb3NcclxuICAgICAqL1xyXG4gICAgY29uc3QgcmVuZGVyVG9kbyA9IChpbmRleCkgPT4ge1xyXG4gICAgICAgIGxldCBjb2xsYXBzZSA9IDA7XHJcbiAgICAgICAgbGV0IGFycmF5TGVuZ3RoID0gcHJvamVjdHNBcnJheVtpbmRleF0udG9kb3MubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgLy9Eb25lIEljb24gYW5kIGl0cyBkaXYgY3JlYXRpb25cclxuICAgICAgICAgICAgbGV0IGRvbmVJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgICAgICAgICBkb25lSWNvbi5jbGFzc0xpc3QuYWRkKCdtYXRlcmlhbC1pY29ucycpO1xyXG4gICAgICAgICAgICBkb25lSWNvbi5pbm5lckhUTUwgPSBcImRvbmVfYWxsXCI7XHJcbiAgICAgICAgICAgIGxldCBkb25lSWNvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkb25lSWNvbkRpdi5jbGFzc0xpc3QuYWRkKCcuY29sLWF1dG8nKTtcclxuICAgICAgICAgICAgZG9uZUljb25EaXYuc2V0QXR0cmlidXRlKCdpZCcsICd0b2RvLWRvbmUnKTtcclxuICAgICAgICAgICAgZG9uZUljb25EaXYuYXBwZW5kQ2hpbGQoZG9uZUljb24pO1xyXG5cclxuICAgICAgICAgICAgLy9MYWJlbCBpY29uIGFuZCBpdHMgZGl2IGNyZWF0aW9uXHJcbiAgICAgICAgICAgIGxldCBsYWJlbEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgICAgIGxhYmVsSWNvbi5jbGFzc0xpc3QuYWRkKCdtYXRlcmlhbC1pY29ucycpO1xyXG4gICAgICAgICAgICBsYWJlbEljb24uaW5uZXJIVE1MID0gXCJsYWJlbF9vdXRsaW5lXCI7XHJcbiAgICAgICAgICAgIGxhYmVsSWNvbi5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2xhYmVsSWNvbicpXHJcbiAgICAgICAgICAgIGxldCBsYWJlbEljb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgbGFiZWxJY29uRGl2LmNsYXNzTGlzdC5hZGQoJy5jb2wtYXV0bycpO1xyXG4gICAgICAgICAgICBsYWJlbEljb25EaXYuc2V0QXR0cmlidXRlKCdpZCcsICd0b2RvLWxhYmVsJyk7XHJcbiAgICAgICAgICAgIGxhYmVsSWNvbkRpdi5hcHBlbmRDaGlsZChsYWJlbEljb24pO1xyXG5cclxuICAgICAgICAgICAgLy90aGUgZGl2IGNvbnRhaW5lciBmb3IgZG9uZSBhbmQgbGFiZWwgaWNvbnNcclxuICAgICAgICAgICAgbGV0IGRvbmVSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZG9uZVJvdy5jbGFzc0xpc3QuYWRkKCdyb3cnKTtcclxuICAgICAgICAgICAgZG9uZVJvdy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2RvbmUtcm93Jyk7XHJcbiAgICAgICAgICAgIGRvbmVSb3cuYXBwZW5kQ2hpbGQoZG9uZUljb25EaXYpO1xyXG4gICAgICAgICAgICBkb25lUm93LmFwcGVuZENoaWxkKGxhYmVsSWNvbkRpdik7XHJcblxyXG4gICAgICAgICAgICAvL3RoZSBUb2RvIE5hbWVcclxuICAgICAgICAgICAgbGV0IHRvZG9OYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgICAgICB0b2RvTmFtZS5pbm5lckhUTUwgPSBwcm9qZWN0c0FycmF5W2luZGV4XS50b2Rvc1tpXS5uYW1lXHJcbiAgICAgICAgICAgIGxldCB0b2RvTmFtZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIHRvZG9OYW1lTGluay5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgdG9kb05hbWVMaW5rLmNsYXNzTGlzdC5hZGQoJ2NhcmQtbGluaycpO1xyXG4gICAgICAgICAgICB0b2RvTmFtZUxpbmsuc2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZScsICdjb2xsYXBzZScpO1xyXG4gICAgICAgICAgICB0b2RvTmFtZUxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgYGNvbGxhcHNlJHtjb2xsYXBzZX1gKTtcclxuICAgICAgICAgICAgdG9kb05hbWVMaW5rLmFwcGVuZENoaWxkKHRvZG9OYW1lKTtcclxuXHJcbiAgICAgICAgICAgIC8vdG9kbyBkYXRlXHJcbiAgICAgICAgICAgIGxldCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgICAgICAgICAgdG9kb0RhdGUuc2V0QXR0cmlidXRlKCdpZCcsICd0b2RvLWl0ZW0tZGF0ZScpO1xyXG4gICAgICAgICAgICB0b2RvRGF0ZS5pbm5lckhUTUwgPSBwcm9qZWN0c0FycmF5W2luZGV4XS50b2Rvc1tpXS5kdWU7XHJcblxyXG4gICAgICAgICAgICAvL0VkaXQgSWNvbiBhbmQgaXRzIGRpdiBjcmVhdGlvblxyXG4gICAgICAgICAgICBsZXQgZWRpdEljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLWljb25zJyk7XHJcbiAgICAgICAgICAgIGVkaXRJY29uLmlubmVySFRNTCA9IFwiZWRpdFwiO1xyXG4gICAgICAgICAgICBsZXQgZWRpdEljb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZWRpdEljb25EaXYuY2xhc3NMaXN0LmFkZCgnLmNvbC1hdXRvJyk7XHJcbiAgICAgICAgICAgIGVkaXRJY29uRGl2LnNldEF0dHJpYnV0ZSgnaWQnLCAndG9kby1lZGl0Jyk7XHJcbiAgICAgICAgICAgIGVkaXRJY29uRGl2LmFwcGVuZENoaWxkKGVkaXRJY29uKTtcclxuXHJcbiAgICAgICAgICAgIC8vRGVsZXRlIGljb24gYW5kIGl0cyBkaXYgY3JlYXRpb25cclxuICAgICAgICAgICAgbGV0IGRlbGV0ZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtaWNvbnMnKTtcclxuICAgICAgICAgICAgZGVsZXRlSWNvbi5pbm5lckhUTUwgPSBcImRlbGV0ZVwiO1xyXG4gICAgICAgICAgICBsZXQgZGVsZXRlSWNvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkZWxldGVJY29uRGl2LmNsYXNzTGlzdC5hZGQoJy5jb2wtYXV0bycpO1xyXG4gICAgICAgICAgICBkZWxldGVJY29uRGl2LnNldEF0dHJpYnV0ZSgnaWQnLCAndG9kby1kZWxldGUnKTtcclxuICAgICAgICAgICAgZGVsZXRlSWNvbkRpdi5hcHBlbmRDaGlsZChkZWxldGVJY29uKTtcclxuXHJcbiAgICAgICAgICAgIC8vdGhlIGRpdiBjb250YWluZXIgZm9yIGVkaXQgYW5kIGRlbGV0ZSBpY29uc1xyXG4gICAgICAgICAgICBsZXQgZWRpdFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBlZGl0Um93LmNsYXNzTGlzdC5hZGQoJ3JvdycpO1xyXG4gICAgICAgICAgICBlZGl0Um93LnNldEF0dHJpYnV0ZSgnaWQnLCAnZWRpdC1yb3cnKTtcclxuICAgICAgICAgICAgZWRpdFJvdy5hcHBlbmRDaGlsZChlZGl0SWNvbkRpdik7XHJcbiAgICAgICAgICAgIGVkaXRSb3cuYXBwZW5kQ2hpbGQoZGVsZXRlSWNvbkRpdik7XHJcblxyXG4gICAgICAgICAgICAvL2NhcmQgaGVhZGVyIGRpdiB0byBjb250YWluIGFsbCBhYm92ZVxyXG4gICAgICAgICAgICBsZXQgY2FyZEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjYXJkSGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2NhcmQtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIGNhcmRIZWFkZXIuYXBwZW5kQ2hpbGQoZG9uZVJvdyk7XHJcbiAgICAgICAgICAgIGNhcmRIZWFkZXIuYXBwZW5kQ2hpbGQodG9kb05hbWVMaW5rKTtcclxuICAgICAgICAgICAgY2FyZEhlYWRlci5hcHBlbmRDaGlsZCh0b2RvRGF0ZSk7XHJcbiAgICAgICAgICAgIGNhcmRIZWFkZXIuYXBwZW5kQ2hpbGQoZWRpdFJvdyk7XHJcblxyXG4gICAgICAgICAgICAvL3RoZSBjYXJkIGJvZHkgY29udGFpbnMgdGhlIGRlc2NyZXRpb25cclxuICAgICAgICAgICAgbGV0IGNhcmRCb2R5VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjYXJkQm9keVRleHQuY2xhc3NMaXN0LmFkZCgnY2FyZC1ib2R5Jyk7XHJcbiAgICAgICAgICAgIGNhcmRCb2R5VGV4dC5pbm5lckhUTUwgPSBwcm9qZWN0c0FycmF5W2luZGV4XS50b2Rvc1tpXS5kZXNjcml0aW9uO1xyXG5cclxuICAgICAgICAgICAgLy9kaXYgdGhhdCBjb250YWlucyB0aGUgY2FyZCBib2R5XHJcbiAgICAgICAgICAgIGxldCBjYXJkQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjYXJkQm9keS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZScpO1xyXG4gICAgICAgICAgICBjYXJkQm9keS5zZXRBdHRyaWJ1dGUoJ2lkJywgYGNvbGxhcHNlJHtjb2xsYXBzZX1gKTtcclxuICAgICAgICAgICAgY29sbGFwc2UrKztcclxuICAgICAgICAgICAgY2FyZEJvZHkuc2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudCcsICcjYWNjb3JkaW9uJyk7XHJcbiAgICAgICAgICAgIGNhcmRCb2R5LmFwcGVuZENoaWxkKGNhcmRCb2R5VGV4dCk7XHJcblxyXG4gICAgICAgICAgICAvL3RoZSBjYXJkIGRpdiB0aGF0IGNvbnRhaW5zIHRoZSBjYXJkIGhlYWRlciBhbmQgY2FyZCBib2R5XHJcbiAgICAgICAgICAgIGxldCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZCcpO1xyXG4gICAgICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGNhcmRIZWFkZXIpO1xyXG4gICAgICAgICAgICBjYXJkLmFwcGVuZENoaWxkKGNhcmRCb2R5KTtcclxuXHJcbiAgICAgICAgICAgIC8vZGl2IGNvbnRhaW5zIGFsbCB0aGUgY2FyZHNcclxuICAgICAgICAgICAgbGV0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY29yZGlvbicpO1xyXG4gICAgICAgICAgICBjYXJkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcclxuXHJcbiAgICAgICAgICAgIHRvZ2dsZVRvZG8oKVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqY2hlY2sgdGhlIHBlcmlvcml0eSB2YWx1ZSBhbmQgc2V0IHRoZSBsYWJlbCBjb2xvciBkZXBlbmRzIG9uIHRoZSB2YWx1ZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29uc3QgY2hlY2tQcmlvcml0eSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9qZWN0c0FycmF5W2luZGV4XS50b2Rvc1tpXS5wcmlvcml0eSA9PSBcIk5vcm1hbFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxJY29uLnN0eWxlLmNvbG9yID0gXCIjMDBjNDFmXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb2plY3RzQXJyYXlbaW5kZXhdLnRvZG9zW2ldLnByaW9yaXR5ID09IFwiTWVkaXVtXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbEljb24uc3R5bGUuY29sb3IgPSBcIiNmZmZiMDBcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvamVjdHNBcnJheVtpbmRleF0udG9kb3NbaV0ucHJpb3JpdHkgPT0gXCJJbXBvcnRuYXRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsSWNvbi5zdHlsZS5jb2xvciA9IFwicmVkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0c0FycmF5KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBjaGFuZ2UgdGhlIFRvZG8gc3RhdGUgZnJvbSB1bmRvbmUgdG8gZG9uZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hhbmdlVG9kb1N0YXRlKCkge1xyXG4gICAgICAgICAgICAgICAgZG9uZUljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNBcnJheVtpbmRleF0udG9kb3NbaV0uaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0c0FycmF5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3RhdGVDb2xvcigpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIGNoYW5nZSB0aGUgY29sb3Igb2YgdGhlIGRvbmUgaWNvbiB3aGVuIHRoZSB0b2RvIGlzIGRvbmVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZVN0YXRlQ29sb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvamVjdHNBcnJheVtpbmRleF0udG9kb3NbaV0uaXNEb25lID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb25lSWNvbi5zdHlsZS5jb2xvciA9IFwiIzFmYjQ2MlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzQXJyYXkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIGRlbGV0ZSBUb2RvIGl0ZW1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZVRvZG8gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RzQXJyYXlbaW5kZXhdLnRvZG9zLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0c0FycmF5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUb2Rvc0xpc3RVaSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclRvZG8oaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9mdW5jdGlvbiBjYWxsc1xyXG4gICAgICAgICAgICBjaGVja1ByaW9yaXR5KCk7XHJcbiAgICAgICAgICAgIGNoYW5nZVN0YXRlQ29sb3IoKTtcclxuICAgICAgICAgICAgY2hhbmdlVG9kb1N0YXRlKCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZVRvZG8oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB0aGlzIGZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgc2VsZWN0ZWQgcHJvamVjdCBuYW1lXHJcbiAgICAgKiBAcGFyYW0geyp9IGluZGV4IHRoZSBpbmRleCBvZiB0aGUgc2VsZWN0ZWQgcHJvamVjdFxyXG4gICAgICovXHJcbiAgICBjb25zdCByZW5kZXJTZWxlY3RlZFByb2plY3ROYW1lID0gKGluZGV4KSA9PiB7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkUHJvak5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0ZWQtcHJvamVjdC1uYW1lJyk7XHJcbiAgICAgICAgc2VsZWN0ZWRQcm9qTmFtZS5pbm5lckhUTUwgPSBwcm9qZWN0c0FycmF5W2luZGV4XS5uYW1lO1xyXG4gICAgICAgIHNlbGVjdGVkUHJvak5hbWUuc2V0QXR0cmlidXRlKCdzZWxlY3RlZC1uYW1lLWluZGV4JywgaW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogdGhpcyBmdW5jdGlvbiB0byBjbGVhciB0aGUgcHJvamVjdHMgbGlzdCBVSVxyXG4gICAgICovXHJcbiAgICBjb25zdCBjbGVhclByb2plY3RzTGlzdFVpID0gKCkgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0cy1ib2R5JykuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRoaXMgZnVuY3Rpb24gdG8gY2xlYXIgdGhlIHRvZG9zIGxpc3QgVUlcclxuICAgICAqL1xyXG4gICAgY29uc3QgY2xlYXJUb2Rvc0xpc3RVaSA9ICgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjb3JkaW9uJykuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHRvZ2dsaW5nIHRoZSB0b2RvIGl0ZW1zIGNhcmRcclxuICAgICAqL1xyXG4gICAgY29uc3QgdG9nZ2xlVG9kbyA9ICgpID0+IHtcclxuICAgICAgICAkKFwiLmNhcmRcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgJF90YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciAkX2NhcmRCb2R5ID0gJF90YXJnZXQuZmluZChcIi5jb2xsYXBzZVwiKTtcclxuICAgICAgICAgICAgaWYgKCRfY2FyZEJvZHkpIHtcclxuICAgICAgICAgICAgICAgICRfY2FyZEJvZHkuY29sbGFwc2UoJ3RvZ2dsZScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFkZFByb2plY3QsXHJcbiAgICAgICAgZGVsZXRlUHJvamVjdCxcclxuICAgICAgICByZW5kZXJQcm9qZWN0cyxcclxuICAgICAgICBjbGVhclByb2plY3RzTGlzdFVpLFxyXG4gICAgICAgIGNsZWFyVG9kb3NMaXN0VWksXHJcbiAgICAgICAgYWRkVG9kbyxcclxuICAgICAgICByZW5kZXJUb2RvLFxyXG4gICAgICAgIHJlbmRlclNlbGVjdGVkUHJvamVjdE5hbWUsXHJcbiAgICAgICAgdG9nZ2xlVG9kb1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBSZW5kZXJQcm9qZWN0IH1cclxuXHJcbi8qKlxyXG4gKiBmb3IgbXkgZGVtbyBUdXRvcmlhbCBpIG1hZGUgYSBtYW51YWwgcHJvZWN0IGFuZCBzb21lIFRvZG9zXHJcbiAqL1xyXG5jb25zdCByZW5kZXIgPSBSZW5kZXJQcm9qZWN0KCk7XHJcblxyXG4vL2FkZGluZyB0aGUgZmlyc3QgZWxlbWVudCBtYW51YWxseVxyXG5wcm9qZWN0c0FycmF5WzBdID0geyBuYW1lOiAnVHV0b3JpYWwnLCB0b2RvczogW10gfTtcclxuXHJcbi8vdG9kb3Mgb2JqZWN0cyBmb3IgbXkgdHV0b3JpYWwgZGVtbyB0byBwdXNoIG1hbnVhbGx5IFxyXG5sZXQgdHV0b3RpYWxUb2RvMSA9IFRvZG8oXCJBZGQgcHJvamVjdFwiLCBcIllvdSBjYW4gYWRkIGEgbmV3IHByb2plY3QgYnkgY2xpY2tpbmcgJysnIG5leHQgdG8gTXkgcHJvamVjdHMgb24gdGhlIGxlZnQgdG9wIGFuZCB0eXBlIHRoZSBwcm9qZWN0IG5hbWUgdGhlbiBwcmVzcyAnQWRkJyBcIiwgXCIyMDIwLTAxLTMwXCIsIFwiTm9ybWFsXCIsIHRydWUpO1xyXG5sZXQgdHV0b3RpYWxUb2RvMiA9IFRvZG8oXCJTZWxlY3QgYSBzcGVjaWZpYyBwcm9qZWN0XCIsIFwiVGhlbiB5b3UgY2FuIHNlbGVjdCBhIHNwZWNlZmljIHByb2plY3QgeW91IHdhbm5hIGFkZCB0b2RvcyB0byBpdFwiLCBcIjIwMjAtMDEtMzFcIiwgXCJNZWRpdW1cIiwgZmFsc2UpO1xyXG5sZXQgdHV0b3RpYWxUb2RvMyA9IFRvZG8oXCJBZGRpbmcgYSBuZXcgVG9kb1wiLCBcIlRvIGFkZCBhIG5ldyB0b2RvLCBzZWxlY3QgdGhlIHRhcmdldGVkIHByb2plY3QgdGhlbiBwcmVzcyAnKycgb24gdGhlIHRvcCByaWdoXCIsIFwiMjAyMC0wNS0xMlwiLCBcIkltcG9ydGFudFwiLCB0cnVlKTtcclxubGV0IHR1dG90aWFsVG9kbzQgPSBUb2RvKFwiQWRkaW5nIGEgbmV3IFRvZG8gaW5mb1wiLCBcIkluIHRoZSBwb3AgdXAgZm9ybSBqdXN0IGZpbGwgdGhlIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgdG9kbyBhbmQgVGEgRGEgaXQncyBhZGRlZCB0byB5b3VyIHNlbGVjdGVkIHByb2plY3RcIiwgXCIyMDIwLTA4LTIwXCIsIFwiSW1wb3J0YW50XCIsIGZhbHNlKTtcclxubGV0IHR1dG90aWFsVG9kbzUgPSBUb2RvKFwiU2VlIGFkZGVkIG9yIGV4aXN0aW5nIHRvZG8gaW5mb1wiLCBcIkp1c3QgY2xpY2sgdGhlIFRvZG8gbmFtZSBhbmQgaXQgd2lsbCB0b2dnbGUgYSBtZW51ZSB3aXRoIHRoZSBkZXRhaWxzIHlvdSBhZGRlZCBlYXJsaWVyXCIsIFwiMjAyMS0wOC0yMFwiLCBcIk5vcm1hbFwiLCBmYWxzZSk7XHJcbmxldCB0dXRvdGlhbFRvZG82ID0gVG9kbyhcIk1hcmsgdG9kbyBkb25lIGFmdGVyIGZpbmlzaGluZ1wiLCBcIkp1c3QgY2xpY2sgQWxyaWdodCBtYXJrIG5leHQgdG8gdGhlIHRvZG8gbmFtZSBhbmQgb25jZSB5b3UgY2xpY2sgaXQgaXQgd2lsbCBtYXJrIGdyZWVuIG1lYW5zIGl0J3MgZG9uZVwiLCBcIjIwNTAtMDgtMjBcIiwgXCJJbXBvcnRhbnRcIiwgZmFsc2UpO1xyXG5cclxuLy9pIHB1c2hlZCB0aGVtIG1hbnVhbGx5IGNhdXNlIHRoZSBhZGRUb2RvIGZ1bmN0aW9uIGdldHMgdGhlIHZhbHVlcyBmcm9tIHRoZSBmb3JtIGlucHV0c1xyXG5wcm9qZWN0c0FycmF5WzBdLnRvZG9zLnB1c2godHV0b3RpYWxUb2RvMSk7XHJcbnByb2plY3RzQXJyYXlbMF0udG9kb3MucHVzaCh0dXRvdGlhbFRvZG8yKTtcclxucHJvamVjdHNBcnJheVswXS50b2Rvcy5wdXNoKHR1dG90aWFsVG9kbzMpO1xyXG5wcm9qZWN0c0FycmF5WzBdLnRvZG9zLnB1c2godHV0b3RpYWxUb2RvNCk7XHJcbnByb2plY3RzQXJyYXlbMF0udG9kb3MucHVzaCh0dXRvdGlhbFRvZG81KTtcclxucHJvamVjdHNBcnJheVswXS50b2Rvcy5wdXNoKHR1dG90aWFsVG9kbzYpO1xyXG5cclxucmVuZGVyLnJlbmRlclByb2plY3RzKCk7XHJcbnJlbmRlci5yZW5kZXJUb2RvKDApO1xyXG5yZW5kZXIucmVuZGVyU2VsZWN0ZWRQcm9qZWN0TmFtZSgwKTtcclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCB7IFJlbmRlclByb2plY3QgfSBmcm9tICcuL2NvbnRyb2xsZXInXHJcblxyXG5cclxuY29uc3QgcmVuZGVyID0gUmVuZGVyUHJvamVjdCgpO1xyXG5cclxuLyoqXHJcbiAqIGxpc3RlbiB0byB0aGUgZXZlbnQgd2hlbiBjbGljayBvbiB0aGUgZGVsdGUgaWNvbiBvbiB0aGUgcHJvamVjdFxyXG4gKi9cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzLWJvZHknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0LmRhdGFzZXQuZGVsZXRlSW5kZXggIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gZS50YXJnZXQuZGF0YXNldC5kZWxldGVJbmRleDtcclxuICAgICAgICByZW5kZXIuZGVsZXRlUHJvamVjdChpbmRleCk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG4vKipcclxuICogdGhpcyBmdW5jdGlvbiByZW5kZXJzIHRoZSB0b2RvcyBpbnNpZGUgYW55IHByb2plY3QgZGVwZW5kcyBvbiB0aGUgY2xpY2sgdGFyZ2V0XHJcbiAqL1xyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdHMtYm9keScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldC5kYXRhc2V0LmluZm9JbmRleCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgaW5kZXggPSBlLnRhcmdldC5kYXRhc2V0LmluZm9JbmRleDtcclxuICAgICAgICByZW5kZXIucmVuZGVyU2VsZWN0ZWRQcm9qZWN0TmFtZShpbmRleCk7XHJcbiAgICAgICAgcmVuZGVyLmNsZWFyVG9kb3NMaXN0VWkoKTtcclxuICAgICAgICByZW5kZXIucmVuZGVyVG9kbyhpbmRleCk7XHJcbiAgICB9XHJcbn0pXHJcblxyXG4vKipcclxuICogdGhpcyBmdW5jdGlvbiByZW5kZXIgdGhlIHByb2plY3RzIGZyb20gdGhlIG9iamVjdHMgYXJyYXlcclxuICogb25jZSB0aGUgdXNlciBhZGQgbmV3IHByb2plY3QgYW5kIGNsaWNrIGFkZCBidXR0b25cclxuICovXHJcbmNvbnN0IHJlbmRlckN1cnJlbnRQcm9qZWN0cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICByZW5kZXIuY2xlYXJQcm9qZWN0c0xpc3RVaSgpO1xyXG5cclxuICAgIGxldCBwcm9qTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0LWlucHV0LW5hbWUnKS52YWx1ZTtcclxuXHJcbiAgICByZW5kZXIuYWRkUHJvamVjdChwcm9qTmFtZSk7XHJcblxyXG4gICAgcmVuZGVyLnJlbmRlclByb2plY3RzKCk7XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3QtaW5wdXQtbmFtZScpLnZhbHVlID0gXCJcIjtcclxuXHJcbiAgICAvL2hpZGUgdGhlIGZvcm0gYWZ0ZXIgY2xpY2tpbmcgdGhlIGJ1dHRvblxyXG4gICAgJCgnLm1vZGFsJykubW9kYWwoJ2hpZGUnKVxyXG5cclxuICAgIC8vdGhpcyBmdW5jdGlvbiBjYWxsIHRvIGNvbnRyb2wgdG9kbyBpdGVtcyB0b2dnbGluZ1xyXG4gICAgcmVuZGVyLnRvZ2dsZVRvZG8oKTtcclxufVxyXG5cclxuXHJcblxyXG4vKipcclxuICogdGhpcyBmdW5jdGlvbiBhZGRzIGEgbmV3IFRvZG8gdG8gYSBzcGVjaWZpYyBwcm9lY3QncyB0b2RvcyBhcnJheVxyXG4gKiBhdCBhIHNwZWNpZmljIGluZGV4XHJcbiAqL1xyXG5jb25zdCBhZGROZXdUb2RvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHNlbGVjdGVkUHJvak5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0ZWQtcHJvamVjdC1uYW1lJyk7XHJcbiAgICBsZXQgaW5kZXggPSBzZWxlY3RlZFByb2pOYW1lLmdldEF0dHJpYnV0ZSgnc2VsZWN0ZWQtbmFtZS1pbmRleCcpO1xyXG4gICAgcmVuZGVyLmFkZFRvZG8oaW5kZXgpO1xyXG4gICAgcmVuZGVyLmNsZWFyVG9kb3NMaXN0VWkoKTtcclxuICAgIHJlbmRlci5yZW5kZXJUb2RvKGluZGV4KTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWlucHV0LW5hbWUnKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby1pbnB1dC1kZXNjcmlwdGlvbicpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLWRhdGUnKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAvL2hpZGUgdGhlIGZvcm0gYWZ0ZXIgY2xpY2tpbmcgdGhlIGJ1dHRvblxyXG4gICAgJCgnLm1vZGFsJykubW9kYWwoJ2hpZGUnKVxyXG4gICAgLy90aGlzIGZ1bmN0aW9uIGNhbGwgdG8gY29udHJvbCB0b2RvIGl0ZW1zIHRvZ2dsaW5nXHJcbiAgICByZW5kZXIudG9nZ2xlVG9kbygpO1xyXG59XHJcblxyXG5cclxuLy8gQWRkIHByb2plY3QgYnV0dG9uIGV2ZW50IHdoZW4gaXQncyBjbGlja2VkXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtcHJvamVjdC1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbmRlckN1cnJlbnRQcm9qZWN0cyk7XHJcblxyXG4vLyBBZGQgdG9kbyBidXR0b24gZXZlbnQgd2hlbiBpdCdzIGNsaWNrZWRcclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10b2RvLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkTmV3VG9kbyk7XHJcblxyXG4vL3RoaXMgZnVuY3Rpb24gY2FsbCB0byBjb250cm9sIHRvZG8gaXRlbXMgdG9nZ2xpbmdcclxucmVuZGVyLnRvZ2dsZVRvZG8oKTtcclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);